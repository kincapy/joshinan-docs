---
name: docs-restructuring-plan
description: ドメインナレッジ・仕様・データモデルを横断する再構成計画の策定スキル。/docs-restructuring-plan で呼び出し、現状調査→影響分析→編集方針をタスクドキュメントとして出力する。カテゴリ分割、エンティティの再配置、リナンバリングなど構造的な変更の計画に使用する。
---

# Restructuring Plan スキル

ドメインナレッジ・システム仕様・データモデルを横断する構造的な変更を計画し、タスクドキュメントとして出力する。**計画のみを行い、実際の編集は行わない。**

## 使い分け

| やりたいこと | 使うスキル |
|-------------|-----------|
| カテゴリ分割・統合・エンティティの再配置 | **このスキル** |
| 単一カテゴリのドキュメント作成・更新 | `docs-domain-knowledge` / `docs-system-specification` |
| 既存仕様に基づく実装タスク作成 | `docs-tasks` |
| ドキュメント間の整合性チェック | `docs-maintenance` |

## プロセス

### 1. 変更の意図を把握

ユーザーから **何を・なぜ・どの程度** 変えたいかを確認する。

### 2. 現状調査

`Task` ツール（`subagent_type: Explore`）で以下を網羅的に調査する:

| 対象 | 確認ポイント |
|------|-------------|
| `docs/01-domain-knowledge/{category}/` | 業務フロー、データ定義の現在の記述 |
| `docs/02-system-specification/{category}/` | エンティティ定義、リレーション |
| `docs/03-tasks/` | 既存タスクの実装状況 |
| `docs/.vitepress/config.ts` | サイドバー定義への影響 |

**調査の出力**: エンティティ関係図、変更対象一覧、他カテゴリからの参照

### 3. ユーザーとの方針すり合わせ

調査結果を要約し、`AskUserQuestion` で分割境界・命名・優先度を確認する。

### 4. タスクドキュメントの作成

タスクファイルの基本規約は `docs-tasks` スキルに従う。
**HHMM は JST の現在時刻**（`TZ=Asia/Tokyo date +%H%M`）を使う。

#### このスキル固有のセクション

通常のタスクドキュメント（ステータス、参照ドキュメント、チェックリスト、申送事項）に加え、以下のセクションを含める:

**背景と動機** — なぜ再構成が必要か

**編集方針** — 以下のように方針ごとに分けて記述する:

- **方針 N: ドメインナレッジの再構成** — カテゴリ分割・統合・リネームの方針
- **方針 N: システム仕様の再構成** — エンティティの再配置、FK の変更（テーブル形式で Before/After を明示）
- **方針 N: サイドバー定義の更新** — `config.ts` のサイドバー定義への影響
- **方針 N: 他カテゴリへの波及** — 参照リンク更新、カテゴリ番号リナンバリング

#### 編集方針の記述ルール

- 変更前 → 変更後をテーブルで明示する
- 残すものと移動するものを理由付きで明記する
- **「追加しない」判断も記述する**（検討したが不要と判断した理由を残す）

### 5. ユーザーへの提示

タスクドキュメントを要約して提示し、方針の承認を得る。

## カテゴリ番号のリナンバリング

カテゴリの分割・挿入で番号がずれる場合:

1. `docs/01-domain-knowledge/` と `docs/02-system-specification/` の両方で影響カテゴリを列挙
2. 他ドキュメント・タスクからの参照リンクを検索
3. `docs/.vitepress/config.ts` のサイドバー定義を更新
4. すべてをチェックリストに含める
