---
name: docs-domain-knowledge
description: 業務知識（ドメインナレッジ）のドキュメント作成・更新スキル。/docs-domain-knowledge で呼び出し、ユーザーと対話しながら業務知識を 01-work-flow.md / 02-data.md / 03-issues.md に整理する。新しい業務カテゴリの追加や既存カテゴリの更新に使用する。
---

# Domain Knowledge ドキュメンテーションスキル

`docs/01-domain-knowledge/` 配下の業務知識を作成・更新する手順スキル。
内容規約は `docs/01-domain-knowledge/README.md` を参照。

## 起動時の処理

### 1. カテゴリ把握

まず `docs/01-domain-knowledge/` 配下の既存カテゴリを一覧し、ユーザーに提示する。

```
docs/01-domain-knowledge/
├── 00-japanese-language-education/
├── 01-school-info/
├── 02-student-management/
├── {NN-other-categories}/
└── index.md
```

### 2. ユーザーへの確認

`AskUserQuestion` を使い、以下を確認する:

- **対象カテゴリ**: 既存カテゴリの更新 or 新規カテゴリの作成
- **作業範囲**: どのファイルを対象とするか（01-work-flow.md / 02-data.md / 03-issues.md）
- **情報源**: ユーザーが口頭で説明する or 既存の資料がある

### 3. 新規カテゴリの場合

ディレクトリと3つの空ファイルを作成する（数値プレフィックスで順番を制御）:

```
docs/01-domain-knowledge/{NN}-{category}/
├── 01-work-flow.md  # 業務フロー（1番目に表示）
├── 02-data.md       # 業務データ（2番目に表示）
└── 03-issues.md     # 業務課題（3番目に表示）
```

**ファイル名のルール**: `{数字}-{名前}.md` 形式でプレフィックスを付ける。

**VitePress サイドバー**: 新規カテゴリを作成した場合、`docs/.vitepress/config.ts` のサイドバー定義に手動でエントリを追加すること。各ドキュメントファイルには frontmatter の `title` を設定する。

**README.md / index.md**: 新規カテゴリのディレクトリには `index.md` を作成し、frontmatter の `title` に日本語ラベルを設定する。

```markdown
<!-- index.md -->
---
title: 車両管理
---

# 車両管理
```

```markdown
<!-- 02-data.md -->
---
title: データ定義
---

# 車両管理データ
```

## ドキュメント作成ガイド

### 01-work-flow.md — 業務フロー

ユーザーに以下を質問しながら整理する:

- この業務の**担当者**は誰か？役割分担は？
- 業務の**目的とゴール**は？
- 業務の**前提条件**は？
- **ステップ**を順番に教えてほしい
- 業務完了後の**アウトプット**は？
- **他の業務との連携**はあるか？

記述フォーマット:

```markdown
---
title: 業務フロー
---

# {カテゴリ}の業務内容

## 担当者

- {担当者・役割の説明}

## 目的とゴール

{業務の目的}

## 前提情報

- {前提条件}

## 業務ステップ

### 1. {ステップ名}

{ステップの詳細説明}

- 入力: {必要な情報}
- 出力: {生成される情報}
- 担当: {担当者}

### 2. {ステップ名}

...

## アウトプット

- {業務完了後に残る成果物}

## 他業務との連携

- {連携先と影響の説明}
```

### 02-data.md — 業務データ

ユーザーに以下を質問しながら整理する:

- この業務で扱う**主要なオブジェクト**（モノ・コト）は何か？
- 各オブジェクトにはどんな**項目（プロパティ）**があるか？
- **具体的な値の例**は？
- オブジェクト間の**関連性**はあるか？

記述フォーマット:

```markdown
---
title: データ定義
---

# {カテゴリ}データ

## {オブジェクト名}

{オブジェクトの簡潔な説明}

| 項目名       | 用途         | 値の例   |
| ------------ | ------------ | -------- |
| {プロパティ} | {簡潔な説明} | {具体例} |

### 関連

- {他オブジェクトとの関係の説明}
```

### 03-issues.md — 業務課題

ユーザーに以下を質問しながら整理する:

- **形骸化**している箇所はあるか？
- **非効率**な箇所はあるか？
- **ミスや失敗**が起きやすい箇所はあるか？
- **時間がかかる**箇所はあるか？

記述フォーマット:

```markdown
---
title: 課題
---

# {カテゴリ}の課題・問題

## 形骸化しうる箇所

### {課題名}

- 状況: {現状の説明}
- 理由: {なぜ形骸化しているか}
- 影響: {放置した場合の影響}

## 非効率な箇所

### {課題名}

- 状況: {現状の説明}
- 理由: {なぜ非効率か}
- システムで解決可能なポイント: {改善案}

## ミス・失敗が多い箇所

### {課題名}

- 状況: {現状の説明}
- 発生頻度: {どのくらい起こるか}
- システムで解決可能なポイント: {改善案}

## 時間がかかる箇所

### {課題名}

- 状況: {現状の説明}
- 所要時間: {現状の時間}
- システムで解決可能なポイント: {改善案}
```

## 対話のルール

- **一度に大量の質問をしない**。2〜4問ずつ `AskUserQuestion` で聞く
- ユーザーの回答をもとに、**ドキュメントの草案を書いてから提示**する
- **システム側の知識は書かない**（それは system-specification の役割）
- **改善案は 03-issues.md の中でのみ**触れる。02-data.md や 01-work-flow.md には書かない
- 業務で使われる**専門用語**はそのまま残し、必要に応じて補足を加える

## 完了時の処理

1. 作成・更新したファイルの内容をユーザーに提示する
2. **相互参照の整合性チェック**を実施する:
   - 更新した domain-knowledge ファイルのパスで `docs/` 配下を検索し、参照元を特定する
   - 特に `docs/02-system-specification/` 配下の対応カテゴリに影響がないかを確認する:
     - `02-data.md` を変更した場合 → `01-entity.md` のエンティティ定義と整合しているか
     - `01-work-flow.md` を変更した場合 → `02-uiux.md` の画面定義と整合しているか
     - `03-issues.md` を変更した場合 → `02-uiux.md` の課題解決方針と整合しているか
   - 不整合がある場合はユーザーに報告し、修正するか確認する
3. **VitePress サイドバー更新**: 新規ファイル・カテゴリを追加した場合、`docs/.vitepress/config.ts` のサイドバー定義を更新する
4. 次のステップについて確認する:
   - このまま `docs-system-specification` の作成に進むか？
   - 他のカテゴリの domain-knowledge を先に整理するか？
   - 一旦ここで終了するか？
