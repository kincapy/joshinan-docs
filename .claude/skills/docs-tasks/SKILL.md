---
name: docs-tasks
description: 実装タスクのドキュメント作成・管理スキル。/docs-tasks で呼び出し、仕様ドキュメントやユーザー指示を元にタスクファイルを作成し、チェックリスト形式で実装を進める。タスクの作成、実行、申送事項の記録に使用する。
---

# Tasks ドキュメンテーションスキル

`docs/03-tasks/` 配下の実装タスクを作成・管理する手順スキル。
パス規約・構成は `docs/03-tasks/README.md` を参照。

## 起動時の処理

### 1. 実装内容の把握

以下のいずれかで実装内容を受け取る:

- `docs/02-system-specification/{category}/` 配下の仕様ドキュメント（`01-entity.md`, `02-uiux.md`）を読み込む
- ユーザーからプロンプトで直接指示を受ける

### 2. 既存タスクの確認

`docs/03-tasks/` 配下の既存タスクファイルを一覧し、ユーザーに提示する。

- **既存タスクの続行**: 未完了のタスクがあれば、続きから作業するか確認
- **新規タスクの作成**: 新しいタスクを作成するか確認

### 3. ユーザーへの確認

`AskUserQuestion` を使い、以下を確認する:

- **対象**: どのカテゴリの仕様ドキュメントを元にするか
- **操作**: 新規タスク作成 or 既存タスク続行
- **スコープ**: タスク作成のみ or 作成後に実装まで進めるか

## タスクファイル作成

### ファイルパスの規約

```
docs/03-tasks/{年}/{月}/{日}/{HHMM}-{任意の名前}.md
```

HHMM はタスク作成時の24時間制の時刻（例: 1430 = 14:30）。

例: `docs/03-tasks/2026/02/16/1430-学生管理機能立ち上げ.md`

複数ファイルにまたがるタスクはディレクトリにする:
例: `docs/03-tasks/2026/02/16/1430-学生管理機能立ち上げ/`

**年・月・日ディレクトリが存在しない場合は自動で作成する。**

### タスクファイルのフォーマット

```markdown
---
title: {タスク名}
status: 未実行
---

# {タスク名}

## 参照ドキュメント

- 仕様: `docs/02-system-specification/{category}/`
- 引き継ぎ元: (あれば記載)

## 確認事項

(ユーザーへの確認内容と回答)

## 実装項目

- [ ] {具体的な実装項目}
- [ ] {具体的な実装項目}

### 検証

- [ ] `npm run build` — VitePress ビルドが通ることを確認

## 申送事項

(実装中に追記)

## ドキュメント修正提案

(実装中に追記)
```

### チェックリストの粒度

- 1つのチェック項目 = **1つのファイル操作**（作成 or 変更）を基本とする
- 複数ファイルにまたがる変更は分割する
- 動作確認やテストも個別のチェック項目にする

**このタイミングで必ずユーザーに確認と承認を受ける。**

## タスク実行

### 実行フロー

1. タスクファイルの frontmatter `status` を `対応中` に更新
2. チェックリストを上から順に実行
3. 各項目の完了時にチェックを入れる (`- [x]`)
4. 実装中に見つけた課題は「申送事項」または「ドキュメント修正提案」に追記
5. 全項目完了後、CLAUDE.md の Post-Implementation Checklist を実行:
   - `npm run build`
6. 全て通ったら frontmatter `status` を `完了` に更新

### ドキュメント編集時の追加手順

タスク内で `docs/` 配下のドキュメントを追加・更新・削除した場合、以下を必ず実施する:

#### VitePress サイドバーの更新

`docs/.vitepress/config.ts` にサイドバーを直接記述しているため、ファイルやカテゴリの追加・削除・リネーム時は **config.ts のサイドバー定義を手動で更新**すること。

各ドキュメントファイルには frontmatter `title` を設定する:

```markdown
---
title: データ定義
---

# 車両管理データ
```

#### 相互参照の整合性チェック

ドキュメントを更新した場合、**他のドキュメントから参照されていないかを確認**する:

1. 更新したドキュメントのファイルパスで `docs/` 配下を検索する
2. 参照元のドキュメントに影響がないかを確認する:
   - リンク切れが発生していないか
   - 参照先の内容変更により、参照元の記述が不正確になっていないか
   - エンティティ名やプロパティ名の変更が他ドキュメントに波及していないか
3. 影響がある場合は参照元のドキュメントも修正する
4. 修正が必要な箇所が多い場合は「申送事項」に記録する

**特に注意すべき参照関係:**

| 変更元 | 影響を受けやすいドキュメント |
|--------|---------------------------|
| `01-domain-knowledge/*/02-data.md` | `02-system-specification/*/01-entity.md` |
| `01-domain-knowledge/*/01-work-flow.md` | `02-system-specification/*/02-uiux.md` |
| `02-system-specification/*/01-entity.md` | `02-system-specification/*/02-uiux.md` |

### 実装中のスキル参照

実装時は `.claude/skills/` 内の関連スキルを参照する。

### 申送事項の記録ルール

実装中に以下を発見した場合、タスクファイルに追記する:

#### 申送事項

- 後回しにしたTODO（今のスコープ外だが将来必要）
- コードベース上の問題（既存バグ、技術的負債など）
- 実装の前提条件や注意事項

#### ドキュメント修正提案

- `docs/02-system-specification/` の修正が必要な箇所
  - 実装矛盾（仕様通りに実装できない）
  - 考慮漏れ（仕様に記載がない必要事項）
  - 大幅な仕様変更が必要な場合

## 既存タスクの続行

既存のタスクファイルを読み込み、未完了のチェック項目から作業を再開する。

1. タスクファイルを読み込む
2. `- [ ]` の未完了項目を特定
3. 申送事項を確認し、前回の課題を把握
4. 続行箇所をユーザーに提示し、確認を得てから再開

## 完了時の処理

1. タスクファイルの frontmatter `status` を `完了` に更新
2. 申送事項とドキュメント修正提案をユーザーに提示
3. 次のステップについて確認する:
   - 申送事項を元に新しいタスクを作成するか？
   - ドキュメント修正提案を反映するか？
   - 一旦ここで終了するか？
