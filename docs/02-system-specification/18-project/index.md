---
title: プロジェクト機能
---

# プロジェクト機能

## 概要

予め要件定義されたワークフロー（スキル）に沿って、人間は入力するだけで業務が完了する機能。
[システムコンセプト](../00-concept/index.md) の「業務管理をシステムが主導する」を具体的に実現する。

コンセプトの詳細は [プロジェクト機能コンセプト](../00-concept/02-project-feature.md) を参照。

## 核となる設計思想

**人間がワークフローを考える必要はない。システムが予め定義されたワークフローを提示し、人間はそれに沿って入力するだけで、最終成果物（申請書類等）が生成される。**

## 構成要素

| 概念 | 説明 | 例 |
|------|------|----|
| **スキル** | 業務パターンのテンプレート。ワークフロー・必要書類・完了条件を事前定義 | 特定技能申請スキル |
| **プロジェクト** | スキルのインスタンス。具体的な案件の進行管理単位 | 「田中太郎の特定技能申請」 |
| **タスク** | プロジェクト内の個々の作業。ファイルアップロード・データ入力など | 「パスポートコピーを収集する」 |

## 他機能との違い

| | チャットボット | 帳票出力 | プロジェクト |
|---|---|---|---|
| **起点** | 人間が自由に話しかける | 人間がテンプレートを指定 | **システムがスキルを提示** |
| **操作** | 自由な対話 | プロンプトで出力/修正 | **定義されたワークフローに沿って進行** |
| **期間** | 1回の対話で完結 | 1回の操作で完結 | **日〜週〜月単位で継続** |
| **データ** | 既存データの読み書き | 既存データから帳票生成 | **新しいデータの追加が中心** |

## 2つのモード

### 実行モード

スキルを選択してプロジェクトを開始し、ワークフローに沿って作業を進める。

### 管理モード

スキルの新規作成・修正を行う。帳票テンプレートと同様にプロンプトベースで操作し、**必ず決裁が必要**。

## プロジェクトの流れ（特定技能申請の例）

```
1. プロジェクト開始（ウィザード形式）
   ├ STEP 1: スキル「特定技能申請」を選択
   ├ STEP 2: 対象学生を選択（学生DBから検索・選択）
   │         → 国籍が自動取得され、条件分岐に使用
   └ STEP 3: 職種（分野）を選択
             → 職種に応じた追加書類を自動判定

2. タスクボード（WBS）が自動生成される
   ┌──────────────────────────────────────────────────┐
   │ ■ データ入力                                      │
   │ ☐ DAT-001 受入れ企業情報  未着手  — フォーム入力  │
   │                                                   │
   │ ■ 書類作成（当社）                                │
   │ ☐ DOC-001 申請書(申請人)  未着手  — 企業情報待ち  │
   │ ☐ DOC-002 申請書(所属機関) 未着手  — 企業情報待ち  │
   │ ...                                               │
   │                                                   │
   │ ■ 証憑収集（申請人）                              │
   │ ☐ COL-001 健康診断        未着手  —               │
   │ ☐ COL-003 技能試験合格証   未着手  —              │
   │ ☐ COL-008 医療保険資格情報  未着手  —             │
   │ ...                                               │
   │                                                   │
   │ ■ 証憑収集（企業）                                │
   │ ☐ COL-012 登記事項証明書   未着手  —              │
   │ ...                                               │
   └──────────────────────────────────────────────────┘

3. 最初に DAT-001（企業情報）を入力
   → 企業名・代表者・住所等をフォームで入力
   → Company テーブルに保存
   → DOC系タスクの申請書に企業情報が自動反映される

4. 各タスクをクリック → アクション実行
   ├ ファイルアップロード（Box に保存）
   ├ メモ入力（注記事項）
   └ ステータスを完了に変更

5. 全必須タスク完了 → 申請書類セットを自動生成
```

### 書類一括アップロードと自動振り分け

プロジェクト詳細画面から、複数の書類を一度にアップロードできる。AIが書類の種類を判定し、該当するタスクに自動で格納する。

```
1. ユーザーが「書類をまとめてアップロード」をクリック
2. 複数ファイルをドラッグ＆ドロップ
3. 「AIで解析して振り分ける」をクリック
4. Claude API が各ファイルの種類を判定
   ├ パスポートコピー → COL-002 に格納
   ├ 健康診断個人票   → COL-001 に格納
   └ 以前の申請書     → DOC-002 に格納 + DAT-001 のフォームにデータ自動入力
5. ユーザーが振り分け先を確認・修正
6. 確定 → 各タスクにファイルを保存、ステータスを更新
```

**なぜこの機能が必要か**: 企業や学生から書類を受け取る際、まとめて渡されることが多い。1件ずつタスクを開いてアップロードするのは手間がかかるため、一括でアップロードしてAIに振り分けさせることで作業を大幅に効率化する。

詳細は [UIUX定義 > 書類一括アップロード画面](./02-uiux.md) を参照。

### 対象者の選択

| 対象者の種別 | 処理 |
|-------------|------|
| **在校生** | 学生マスタから選択 → 氏名・国籍・在留情報等が自動入力済み |
| **新規** | 学生情報を一から入力（将来対応） |

初期は在校生のみ対応。ほとんどのケースは在校生（常南国際学院の卒業生）。

### 企業情報の入力（データ入力タスク）

企業をプロジェクト作成時に選ぶのではなく、**企業情報の収集自体をプロジェクト内のタスク（DAT-001）**として管理する。

| 項目 | 内容 |
|------|------|
| タスクコード | DAT-001 |
| タスク名 | 受入れ企業の基本情報入力 |
| アクション | フォーム入力 |
| 入力項目 | 企業名、代表者、住所、電話番号、法人番号、設立年月日、分野、営業許可 |
| 保存先 | Company テーブル（既存の特定技能エンティティ） |
| 効果 | 入力完了後、DOC系タスク（13件中10件）の企業欄に自動反映 |

**なぜ企業選択をウィザードに入れないか**: 特定技能申請の時点では企業情報が確定していないことが多い。また、登記事項証明書（COL-012）等の企業側書類を集める過程で情報が揃っていくため、プロジェクト内のタスクとして段階的に入力する方が自然。

### 条件分岐による書類の自動判定

プロジェクト開始時に、**学生の国籍**（学生DBから自動取得）と**職種**（ウィザードで選択）の2つだけで、必要な書類を自動判定する。

- 介護分野 → 介護日本語評価試験合格証が「必須」に追加
- 宿泊分野 → 旅館業許可証が「必須」に追加
- 自動車運送業 → 運転免許証・協議会証明書が「必須」に追加
- ベトナム・カンボジア・タイ国籍 → 二国間取決書類が「必須」に追加

技能実習修了の有無・保険種別・年金種別による条件分岐は行わない。これらの書類は全て必須タスクとし、プロジェクト内でファイルアップロードで対応する。

詳細は [エンティティ定義 > 条件分岐ルール](./01-entity.md) を参照。

## スキル管理

### スキルの構成

各スキルには以下が事前定義される。

| 構成要素 | 説明 | 例（特定技能申請） |
|---------|------|--------------------|
| **目的** | 何を達成するか | 特定技能の在留資格変更許可申請 |
| **ゴール** | 完了条件 | 入管への申請書類を提出 |
| **ワークフロー** | 作業手順の定義 | 学生選択 → 書類準備 → 申請書生成 |
| **タスクテンプレート** | 生成するタスクの一覧 | DOC-001〜013, COL-001〜023 |
| **条件分岐ルール** | タスクの必要/不要判定 | 介護分野は介護日本語試験必須 |
| **出力物** | 最終成果物 | 申請書類セット（PDF） |

### スキルの追加・修正

帳票テンプレートと同じくプロンプトベースで操作。**必ず決裁が必要。**

```
User: 「ビザ更新のスキルを作って。必要書類は...」
  ↓
AI: スキル定義を生成 → 確認画面 → 決裁申請
  ↓
決裁者: 承認後 → 新しいスキルがDBに追加される
```

## 権限

### プロジェクト固有の権限

プロジェクト開始者が、他のユーザーに対してプロジェクトごとの権限を設定できる。

| 権限 | 説明 |
|------|------|
| **オーナー** | プロジェクト開始者。全操作 + 権限設定が可能 |
| **編集者** | タスクの操作（ファイルアップロード・ステータス変更・メモ入力）が可能 |
| **閲覧者** | 進捗の閲覧のみ |

### システム全体の権限

チャットボット・帳票出力と同じ3ロール体系。

| ロール | プロジェクト実行 | スキル修正 | 決裁 |
|--------|:---:|:---:|:---:|
| **一般ユーザー** | OK（権限に応じて） | NG | NG |
| **管理者** | OK | 申請のみ | NG |
| **決裁者** | OK | 申請のみ | OK |

## 決裁フロー

チャットボット機能と同じルールを適用する。

| 操作 | 決裁 |
|------|------|
| プロジェクトの開始・タスク操作 | データ変更と同じフロー（決裁者がいれば承認、いなければ即実行） |
| スキルの作成・修正 | **必ず決裁が必要** |

## 初期スキル

実装時に最初から組み込むスキル。

### 特定技能申請スキル

[特定技能の業務フロー](../../01-domain-knowledge/15-specified-skilled-worker/01-work-flow.md) と [エンティティ定義](../15-specified-skilled-worker/01-entity.md) に基づく。

| 項目 | 内容 |
|------|------|
| 目的 | 特定技能の在留資格変更許可申請 |
| ゴール | 入管への申請書類の提出 |
| 対象者 | 常南国際学院の在校生/卒業生 |
| タスク数 | 最大37件（DAT-001 + DOC-001〜013 + COL-001〜023）※条件分岐で変動 |
| ワークフロー | 営業中 → 書類準備中 → 申請中 → 審査中 → 許可済み → 入社済み → 支援中 → 終了 |
| 出力物 | 申請書類セット（DOC-001〜013のPDF） |
